@{
    ViewBag.Title = "Home Page";
}

<div class="page-title">
    <div class="title_left">
        <div class='col-md-12' style='margin: 15px;'>
            <h3>Health Chart</h3>
        </div>


        <canvas id="line-chart" width="100%" height="100%"></canvas>


        <div class='col-md-12' style='margin: 15px;'>
            <h3>Filter Data By Date</h3>
            <div class='col-md-3 col-sm-6'>
                <label for="from" class="form-label">From</label>
                <input type="text" id="fromDate" name="fromDate" class="form-control " />
            </div>
            <div class='col-md-3 col-sm-6'>
                <label for="to" class="form-label">To</label>
                <input type="text" id="toDate" name="toDate" class="form-control" />
            </div>
            <div class='col-md-1 col-sm-2'>
                <label class="form-label" style='visibility: hidden;'>zxc</label>
                <input type="button" value='Search' id='search' class='btn btn-success'>
            </div>
            <div class="col-md-5">&nbsp;</div>
        </div>
        <div class='col-md-12' style='margin: 15px;'>
            <h3>Data of Chart</h3>
            <table data-pagination="true" data-page-list="[5, 10, 20, 50, 100, 200]" data-height="300" id="table">
                <thead>
                    <tr>
                        <th data-field="CreateDate" data-align="center" data-sortable="true">Date</th>
                        <th data-field="HeartBeat" data-align="center" data-sortable="true">HeartBeat</th>
                        <th data-field="Oxy" data-align="center" data-sortable="true">Oxy</th>
                        @*<th data-field="Status" data-align="center" data-sortable="true">Status</th>*@
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

@section scripts{
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js">
    </script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>
    <script>

        var healthyCare = $.connection.HealthyCare
        function init() {
            healthyCare.server.getAllInformation('@Session["UserName"]').done(function (informations) {
                $.each(informations, function () {
                    initChartJS(informations);

                });
            });
        }

        healthyCare.client.updateChart = function (informations) {

            $.each(informations, function () {
                initChartJS(informations);
            });

        }

        // Start the connection
        $.connection.hub.start().done(init);
    </script>
}